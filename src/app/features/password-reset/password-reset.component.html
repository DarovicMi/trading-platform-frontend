<cc-loading-spinner [loading]="loading"></cc-loading-spinner>

<div *ngIf="!loading && token" class="min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900">
    <div class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg max-w-md w-full">
        <h2 class="text-2xl font-bold mb-6 text-gray-800 dark:text-white">Reset Your Password</h2>
        <form #resetPasswordForm="ngForm" (ngSubmit)="resetPassword()">
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">New Password</label>
                <input type="password" [(ngModel)]="newPassword" name="newPassword" required minlength="8"
                    maxlength="16" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_])[a-zA-Z\d\W_]{8,16}$"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" />
            </div>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Confirm Password</label>
                <input type="password" [(ngModel)]="confirmPassword" name="confirmPassword" required minlength="8"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" />
            </div>
            <p class="mt-2 text-sm mb-4 text-gray-500 dark:text-gray-400">Hint: Password should be 8-16 characters
                long
                and must
                include at least one uppercase letter, one lowercase letter, one number, and one special
                character.
            </p>
            <div class="flex justify-end gap-4">
                <button type="button" (click)="router.navigate(['/login'])"
                    class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-gray-500">
                    Cancel
                </button>
                <button type="submit"
                    [disabled]="resetPasswordForm.invalid && newPassword !== confirmPassword || newPassword.length < 8 || newPassword.length > 16"
                    [ngClass]="{
                  'bg-gray-300': resetPasswordForm.invalid && newPassword !== confirmPassword || newPassword.length < 8 || newPassword.length > 16,
                  'hover:bg-gray-300': resetPasswordForm.invalid && newPassword !== confirmPassword || newPassword.length < 8 || newPassword.length > 16,
                  'bg-green-500': resetPasswordForm.valid && newPassword === confirmPassword && newPassword.length >= 8 || newPassword.length <= 16,
                  'hover:bg-green-600': resetPasswordForm.valid && newPassword === confirmPassword && newPassword.length >= 8 || newPassword.length <= 16
                }" class="text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-green-500">
                    Submit
                </button>
            </div>
        </form>
    </div>
</div>